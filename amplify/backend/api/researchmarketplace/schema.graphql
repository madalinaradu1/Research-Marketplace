# This "input" configures a global authorization rule to enable public access to
# all models in this schema. Learn more about authorization rules here: https://docs.amplify.aws/cli/graphql/authorization-rules


type User @model @auth(rules: [
  { allow: owner },
  { allow: groups, groups: ["Admin", "Coordinator"] }
]) {
  id: ID!
  name: String!
  email: String!
  role: String!
  major: String
  gpa: Float
  affiliation: String
  profileComplete: Boolean
}

type Project @model @auth(rules: [
  { allow: groups, groups: ["Faculty", "Coordinator", "Admin"] },
  { allow: private, operations: [read] }
]) {
  id: ID!
  title: String!
  description: String!
  department: String
  skillsRequired: [String]
  duration: String
  applicationDeadline: AWSDateTime
  facultyID: ID!
  isActive: Boolean
}

type Application @model @auth(rules: [
  { allow: owner },
  { allow: groups, groups: ["Faculty", "Coordinator"] }
]) {
  id: ID!
  studentID: ID!
  projectID: ID!
  statement: String!
  transcriptLink: AWSURL
  status: String!
  createdAt: AWSDateTime
}

type Message @model @auth(rules: [
  { allow: owner },
  { allow: groups, groups: ["Faculty", "Coordinator", "Admin"] }
]) {
  id: ID!
  senderID: ID!
  receiverID: ID!
  body: String!
  sentAt: AWSDateTime
}

